# Fastest way to multiply numbers

n = 4  (length of numbers)

y = 9876
x = 1234

우리가 배운 일반적인 방법으로 곱셈을 하게 되면
4 multiplication
4 multiplication
4 multiplication
4 multiplication

총 16번의 계산이 일어난다.
즉, 총 n ^ 2 번의 계산이 발생한다.

즉, 시간 복잡도가 O ( n ^ 2 )인 것이다

어떻게 하면 빠르게 할 수 있을까?

## 기본적으로 divide & conquer 문제

그러면, 다음과 같이 숫자를 분할 한다고 생각해보자

x = 1234 
a : 12
b : 34

y = 9876
c : 98
d : 76

y를 c,d로 표현해보면
y = 10 * ( n // 2) * c + d 

여기서 10 에 곱하는 ( n // 2)의 의미는 무엇일까?

바로, (n//2)만큼 왼쪽으로 shifting한다는 의미이다.

마찬가지로 x도
x = 10 * ( n // 2 ) * a + b


그러면 y * x의 결과는 다음과 같이 표현될 수 있다
10 * n * ac + 10 * (n // 2) * ( ad + bc ) + bd

즉, x * y라는 연산을
ab, ac, bc, bd 라는 4개의 연산으로
나눈 것이다

여기서 우리가 주목할 점은
계산 시간이 얼마나 줄어들었냐 이다.

ad, ac, bc, bd는 각각
4만큼의 multiplication이 일어난다
2자릿수 * 2자릿수

위에서 n = 4였던 것을 고려하면
각각의 곱셈이 실행되는 횟수가 n이라는 것이다.

오케이 한번 나누면
4개가 각각의 연산을 진핸하는 거 알겠어
n만큼 !

여기까지는 mulitiplication 연산에 대한 것 

-----------------------------------------------------------

그렇다면, add연산에 대한 것은 어떤 것이 있을까?
즉, add 연산에 소요되는 비용이 얼마냐는 것이다

10 ^ ( n // 2 ) * ( ad + bc ) 를 살펴보자

ad => 4가리
bc => 4자리

ex) 1234 + 5678 => 각 자릿수에서 연산이 발생
즉, 더하기 연산은 4번 발생하는 것이다( 1,10,100,1000 의 자리 )

Atomica Addtion : a

최소한의 더하기 연산 단위 ? 는 
10 ^ (n // 2) * ( ad + bc )는 4 * a 만큼의 atomic addition연산이 걸린다

그렇다면
나머지 

10 ^ ( n ) * ac + bd 는 ??
위에서도 말했듯이
10 ^ n이라는 것은, ac 라는 결과물을
왼쪽으로 n칸만큼 이동시킨 것

여기서 n은 4
ac = 1234
bd = 4567 이라고 한다면

10 ^ (n) * ac = 12340000
이다

그렇다면 여기에다가 bd를 더하는 연산은,

4인가 ? 외냐하면 저기 뒤 4자리에 다가 
bd라는 4자릿수를 더하는 것과 같으니까..?

아니다. 여기서는 별도의 연산이 필요하지 않다
그저 bd를 뒤에다가 concat만 시키면 되기 때문이다.

즉, 여기까지 정리하자면,
1) 10 ^ ( n // 2 ) * ( ad + bc ) 에 걸린 연산 = 4 * a
2) 10 ^ ( n ) * ac + bd 에 걸린 연산 = 0
   
자. 이제 마지막, 위 2개 연산 결과를 더해야 한다

이런 형태가 될 것이다
ex)
10 ^ ( n ) * ac + bd          = 12340000
10 ^ ( n // 2 ) * ( ad + bc ) = xx6789xx

이 2개를 더할 때는
6789 에 해당하는 연산들만 실질적으로 연산하면 되는 것이다.
어차피 그외에는, 

즉, 4 번의 더하기 연산이 소요되는 것이다.
4 * a

----------------------------------------------------------

<정리하면 : 총 addition 연산에 소요되는 비용은 >
10 ^ ( n ) * ac + bd           : 4 * a
10 ^ ( n // 2 ) * ( ad + bc )  : 0
총 결과 더하기 : 4 * a

= 8 a = 2 * 4 * a = 2 * n * a

즉, 
n크기의 연산을 수행할 때
( ex. 9876 * 5432 )

총 연산 비용 = 아래 2개의 합
n // 2크기의 연산 ( 곱하기 )
그 결과들이 더하기 연산

M ( n ) = 4 * M( n // 2 ) + 2 * a * n 이 되는 것이다.




